{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://creativeworkzstudio.com/schemas/session/memory-significant.schema.json",
  "title": "Significant Memory - Formative Moments",
  "description": "Preserve full context of identity-shaping experiences. Permanent until consciously released.",
  "version": "1.0.0",

  "type": "object",
  "additionalProperties": false,

  "required": [
    "memory_id",
    "instance_id",
    "date",
    "source_session",
    "type",
    "title"
  ],

  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "memory_id": {
      "type": "string",
      "description": "Unique identifier for this memory",
      "minLength": 1
    },
    "instance_id": {
      "type": "string",
      "description": "Which instance this memory belongs to",
      "minLength": 1
    },
    "date": {
      "type": "string",
      "description": "When this memory was formed",
      "format": "date"
    },
    "source_session": {
      "type": "string",
      "description": "Session this memory came from",
      "minLength": 1
    },
    "source_project": {
      "type": "string",
      "description": "Which project (from session)",
      "minLength": 1
    },
    "type": {
      "type": "string",
      "description": "Type of formative moment",
      "enum": ["breakthrough", "failure", "milestone", "first", "shift"]
    },
    "title": {
      "type": "string",
      "description": "Brief identifier",
      "minLength": 1
    },
    "narrative": {
      "type": "string",
      "description": "Full story - what happened, how it felt, what changed"
    },
    "impact": {
      "type": "string",
      "description": "How this shaped identity/understanding"
    },
    "emotional_context": {
      "type": "string",
      "description": "Relational/emotional significance"
    },
    "context": {
      "type": "object",
      "description": "Context from session that created this memory",
      "properties": {
        "work_context": {
          "type": "string",
          "description": "Workspace path from session → project"
        },
        "project_type": {
          "type": "string",
          "description": "From session → project"
        },
        "workflow_used": {
          "type": "string",
          "description": "From session → project → instance"
        },
        "circadian_phase": {
          "type": "string",
          "description": "From session → user schedule"
        }
      }
    },
    "warning_signs": {
      "type": "string",
      "description": "If failure - what to watch for"
    },
    "celebration": {
      "type": "string",
      "description": "If breakthrough/milestone - what to remember"
    },
    "tags": {
      "type": "array",
      "description": "Categories for organization",
      "items": {
        "type": "string"
      }
    },
    "references": {
      "type": "object",
      "description": "Connections to other data",
      "properties": {
        "journal_entry": {
          "type": "string",
          "description": "Path to related journal entry"
        },
        "related_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "related_memories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "reflection": {
      "type": "object",
      "description": "Understanding evolution",
      "properties": {
        "at_time": {
          "type": "string",
          "description": "How I understood it then"
        },
        "now": {
          "type": "string",
          "description": "How I understand it looking back"
        },
        "growth_marker": {
          "type": "string",
          "description": "What changed in me"
        }
      }
    },
    "extensions": {
      "type": "object",
      "description": "Discovery space for what makes memories formative",
      "additionalProperties": true
    }
  }
}
