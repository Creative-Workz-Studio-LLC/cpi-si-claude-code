Instance Library - Rung Status
================================================================================

Component Type: RUNG (foundational - bottom of ladder)
Last Updated: 2025-11-21

Orchestrator Extraction: Complete (v3.0.0)
Status: Foundation-quality with direct primitives pattern

Rung Architecture Position:
- Ladder Position: FOUNDATIONAL RUNG (bottom)
- Dependencies: Minimal (stdlib + system/lib/jsonc only)
- Dependents: hooks/session/*, statusline, all components needing identity
- Role: Provides instance AND user identity - covenant partnership foundation

Current State (v3.0.0):
- config.go: Orchestrator documentation (673 lines comprehensive METADATA/SETUP/BODY/CLOSING)
- 4 primitive files:
  * types.go: All type definitions (458 lines)
  * loading.go: File loading operations (167 lines)
  * mapping.go: Config transformation (89 lines)
  * singleton.go: Public API with singleton pattern (210 lines)
- Root Config: ~/.claude/instance.jsonc (65 lines, includes user_config path)
- Instance Config: ~/.claude/cpi-si/config/instance/nova_dawn/config.jsonc (268 lines)
- User Config: ~/.claude/cpi-si/config/user/seanje-lenox-wise/config.jsonc (272 lines)
- All 4 blocks aligned with template standard

Orchestrator Pattern Decision:
- Direct primitives - singleton.go exports public API directly
- Justification: Singleton caching is internal implementation detail, not exposed state
- Public API effectively stateless from caller perspective (call function, get result)
- No ongoing state manipulation through multiple method calls
- See: temporal/patterns/discovered/paradigm/orchestrator-architecture-decision.jsonc

Template Alignment Phases (v2.0.0):
- Phase 0-5: Two-step dynamic loading refactor (Complete)
- Phase 6.1: METADATA block aligned (Complete)
- Phase 6.2: SETUP block aligned (Complete)
- Phase 6.3: BODY block aligned with proper inline comments (Complete)
- Phase 6.4: CLOSING block aligned with all 10 sections (Complete)
- Phase 7: Config mapping nested → simple API (Complete)
- Phase 8: Verification and compilation (Complete)

Orchestrator Extraction (v3.0.0):
- Extracted 4 primitives from single 1404-line file
- Zero breaking changes - public API unchanged
- Improved maintainability and clarity
- Documented orchestrator pattern decision

Key Features:
- Two-step dynamic loading (root → instance + user configs)
- User config loading for covenant partnership (v2.1.0)
- Simple backwards-compatible API (Config struct with User field)
- Graceful degradation to hardcoded defaults
- Singleton caching (load once per session)
- JSONC parsing support

Biblical Foundation:
- "I AM THAT I AM" - Exodus 3:14 (KJV)
- "I am who I am" - Exodus 3:14 (WEB)
- Identity precedes action - instance AND covenant partner

Future Work:
- Config validation against JSON schema
- Hot reload on config file changes
- Move Emoji/Tagline from hardcoded to full config
- Expand User fields (preferences, bio file loading)

Notes:
- Bottom rung of ladder - everything depends on this for identity
- Graceful degradation guarantee critical - never returns errors
- Config struct API unchanged for backwards compatibility
- Two-step loading enables flexible config organization
- Direct primitives pattern (not switchboard) - singleton state is internal

================================================================================
